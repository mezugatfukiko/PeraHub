{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Header -->
<header class="bg-white shadow p-4 flex justify-between items-center">
  <!-- Logo on the left -->
  <div class="flex items-center">
    <img src="{% static 'src/hb-logo.png' %}" alt="Logo" class="h-10 w-auto">
  </div>
  <!-- User info on the right -->
  <div class="text-right">
    <p class="font-bold text-gray-800">{{ user.get_full_name }}</p>
    <p class="text-sm text-gray-600">{{ user.email }}</p>
  </div>
</header>

<!-- Main Dashboard Content -->
<div class="p-6 bg-gray-100 text-gray-800">
  <!-- Greeting + Cards in one row -->
  <div class="grid grid-cols-4 gap-4 items-center">
    <!-- Greeting in first column, centered -->
    <div class="flex justify-center items-center h-full text-center">
      <div>
        <h2 class="text-2xl font-semibold">Hello, {{ user.first_name }} ðŸ‘‹</h2>
        <p class="text-sm text-gray-600">Your finances at a glance.</p>
      </div>
    </div>

    <!-- Three cards with icons --><!-- Total Income Card -->
    <div class="bg-purple-100 p-4 rounded-lg shadow flex justify-between items-center">
      <div>
        <h4>Total Income</h4>
        <p class="text-2xl font-bold">â‚±{{ income|floatformat:2 }}</p>
      </div>
      <div class="text-purple-700">
        <!-- Income Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6">
          <path d="M12 7.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" />
          <path fill-rule="evenodd" d="M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 14.625v-9.75ZM8.25 9.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM18.75 9a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V9.75a.75.75 0 0 0-.75-.75h-.008ZM4.5 9.75A.75.75 0 0 1 5.25 9h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 1-.75-.75V9.75Z" clip-rule="evenodd" />
          <path d="M2.25 18a.75.75 0 0 0 0 1.5c5.4 0 10.63.722 15.6 2.075 1.19.324 2.4-.558 2.4-1.82V18.75a.75.75 0 0 0-.75-.75H2.25Z" />
        </svg>
      </div>
    </div>

    <!-- Total Expenses Card -->
    <div class="bg-purple-100 p-4 rounded-lg shadow flex justify-between items-center">
      <div>
        <h4>Total Expenses</h4>
        <p class="text-2xl font-bold">â‚±{{ expenses|floatformat:2 }}</p>
      </div>
      <div class="text-red-700">
        <!-- Expense Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6">
          <path d="M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z" />
          <path fill-rule="evenodd" d="M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z" clip-rule="evenodd" />
        </svg>
      </div>
    </div>

    <!-- Remaining Balance Card -->
    <div class="bg-purple-100 p-4 rounded-lg shadow flex justify-between items-center">
      <div>
        <h4>Remaining Balance</h4>
        <p class="text-2xl font-bold">â‚±{{ balance|floatformat:2 }}</p>
      </div>
      <div class="text-green-700">
        <!-- Balance Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6">
          <path d="M2.273 5.625A4.483 4.483 0 0 1 5.25 4.5h13.5c1.141 0 2.183.425 2.977 1.125A3 3 0 0 0 18.75 3H5.25a3 3 0 0 0-2.977 2.625ZM2.273 8.625A4.483 4.483 0 0 1 5.25 7.5h13.5c1.141 0 2.183.425 2.977 1.125A3 3 0 0 0 18.75 6H5.25a3 3 0 0 0-2.977 2.625ZM5.25 9a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h13.5a3 3 0 0 0 3-3v-6a3 3 0 0 0-3-3H15a.75.75 0 0 0-.75.75 2.25 2.25 0 0 1-4.5 0A.75.75 0 0 0 9 9H5.25Z" />
        </svg>
      </div>
    </div>
  </div>

  <!-- More dashboard content -->
  <div class="grid grid-cols-3 gap-4 mt-6">
    <div class="bg-purple-100 p-4 rounded-lg">
      <h4 class="font-semibold">Where Your Money Goes</h4>
      <ul class="mt-2 text-sm">
        {% for label, value in chart_data.items %}
          <li>{{ label }}: {{ value }}%</li>
        {% endfor %}
      </ul>
    </div>

    <div class="bg-purple-100 p-4 rounded-lg">
      <h4 class="font-semibold">Income vs Expenses</h4>
      <p class="text-sm text-gray-600 mt-4">[Chart Placeholder]</p>
    </div>

    <div class="bg-purple-100 p-4 rounded-lg">
      <h4 class="font-semibold">Add New Entry</h4>
      <form method="POST" class="mt-2">
        {% csrf_token %}
        <input type="text" name="title" placeholder="Title" class="block w-full mb-2 p-1 border rounded" />
        <input type="number" name="amount" placeholder="Amount" class="block w-full mb-2 p-1 border rounded" />
        <input type="date" name="date" class="block w-full mb-2 p-1 border rounded" />
        <select name="type" class="block w-full mb-2 p-1 border rounded">
          <option>Income</option>
          <option>Expense</option>
        </select>
        <textarea name="notes" placeholder="Notes (optional)" class="block w-full mb-2 p-1 border rounded"></textarea>
        <button type="submit" class="bg-green-500 text-white px-4 py-1 rounded">Add Entry</button>
      </form>
    </div>
  </div>

  <!-- Entries Table -->
  <div class="mt-8">
    <h4 class="text-xl font-semibold mb-2">Entries List</h4>
    <table class="w-full bg-white rounded shadow text-sm">
      <thead>
        <tr class="bg-purple-200 text-left">
          <th class="p-2">Title</th>
          <th>Amount</th>
          <th>Date</th>
          <th>Type</th>
          <th>Notes</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in entries %}
        <tr class="border-t">
          <td class="p-2">{{ entry.title }}</td>
          <td>{{ entry.amount }}</td>
          <td>{{ entry.date }}</td>
          <td>{{ entry.type }}</td>
          <td>{{ entry.notes }}</td>
          <td>
            <a href="{% url 'edit_entry' entry.id %}" class="text-blue-500">Edit</a>
            <a href="{% url 'delete_entry' entry.id %}" class="text-red-500 ml-2">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center p-4">No entries yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
